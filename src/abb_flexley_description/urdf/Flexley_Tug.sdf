<sdf version='1.9'>
  <model name='Flexley_Tug'>
    <pose>0 0 0 0 0 0</pose>

    <link name="base_footprint"/>

    <!-- -Base Link -->
    <link name='base_link'>
      <inertial>
        <pose>0 0 0.09 0 0 0</pose> <!-- x=0, y=0 , z=0.09m, r=0, p=0, y=0 -->
        <mass>100</mass> <!-- mass of chassis -->
        <inertia>
            <ixx>2.0833</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>36.75</iyy>
            <iyz>0</iyz>
            <izz>38.83</izz>
        </inertia>
      </inertial>
      
      <collision name='base_collision'>
        <pose>0 0 0.09 0 0 0</pose> <!-- x=0, y=0 , z=0.09m, r=0, p=0, y=0 -->
        <geometry>
          <box>
            <size>2.1 0.5 0.23</size> <!-- Box 2.1m length, 0.5m width, 0.23m height -->
          </box>
        </geometry>
      </collision>

      <visual name='base_link_visual'>
        <pose>0 0 0.09 0 0 0</pose> <!-- x=0, y=0 , z=0.09m, r=0, p=0, y=0 -->
        <material>
         <ambient>0.2 0.2 0.2 1</ambient>
         <diffuse>0.2 0.2 0.2 1</diffuse>
        </material>
        <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- scale 0.001 for units in meters -->
            <uri>../meshes/chassis.stl</uri>
          </mesh>
        </geometry>
      </visual> 

      <sensor name="front_camera" type="camera">  
       <pose>1.0 0 0.39 0 0 0</pose>  <!-- x=1m, y=0 , z=0.39m, r=0, p=0, y=0 -->
       <always_on>1</always_on> <!-- Keeps camera always on -->
       <update_rate>30</update_rate> <!-- 30 fps uprade rate -->
       <visualize>true</visualize>
       <topic>front_cam</topic> <!-- ign topic -->
       <camera>     <!-- Camera Properties -->
          <horizontal_fov>2.0944</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>50</far>
            </clip>
       </camera>
      </sensor>  
      
      <sensor name="back_camera" type="camera">  
       <pose>-1.0 0 0.39 0 0 3.14</pose>  <!-- x=-1m, y=0 , z=0.39m, r=0, p=0, y=0 -->
       <always_on>1</always_on> <!-- Keeps camera always on -->
       <update_rate>30</update_rate> <!-- 30 fps uprade rate -->
       <visualize>true</visualize>
       <topic>back_cam</topic> <!-- ign topic -->
       <camera>     <!-- Camera Properties -->
          <horizontal_fov>2.0944</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>50</far>
            </clip>
       </camera>
      </sensor> 
      
      <sensor name="front_right_camera" type="camera">  
       <pose>1.0 -0.5 0.39 0 0 -1.57</pose>  <!-- x=1m, y=0.5 , z=0.39m, r=0, p=0, y=0 -->
       <always_on>1</always_on> <!-- Keeps camera always on -->
       <update_rate>30</update_rate> <!-- 30 fps uprade rate -->
       <visualize>true</visualize>
       <topic>front_right_cam</topic> <!-- ign topic -->
       <camera>     <!-- Camera Properties -->
          <horizontal_fov>2.0944</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>50</far>
            </clip>
       </camera>
      </sensor>  
      
      <sensor name="back_right_camera" type="camera">  
       <pose>-1.0 -0.5 0.39 0 0 -1.57</pose>  <!-- x=1m, y=0.5 , z=0.39m, r=0, p=0, y=0 -->
       <always_on>1</always_on> <!-- Keeps camera always on -->
       <update_rate>30</update_rate> <!-- 30 fps uprade rate -->
       <visualize>true</visualize>
       <topic>back_right_cam</topic> <!-- ign topic -->
       <camera>     <!-- Camera Properties -->
          <horizontal_fov>2.0944</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>50</far>
            </clip>
       </camera>
      </sensor>  
      
      <sensor name="front_left_camera" type="camera">  
       <pose>1.0 0.5 0.39 0 0 1.57</pose>  <!-- x=1m, y=0.5 , z=0.39m, r=0, p=0, y=0 -->
       <always_on>1</always_on> <!-- Keeps camera always on -->
       <update_rate>30</update_rate> <!-- 30 fps uprade rate -->
       <visualize>true</visualize>
       <topic>front_left_cam</topic> <!-- ign topic -->
       <camera>     <!-- Camera Properties -->
          <horizontal_fov>2.0944</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>50</far>
            </clip>
       </camera>
      </sensor>
      
      <sensor name="back_left_camera" type="camera">  
       <pose>-1.0 0.5 0.39 0 0 1.57</pose>  <!-- x=1m, y=0.5 , z=0.39m, r=0, p=0, y=0 -->
       <always_on>1</always_on> <!-- Keeps camera always on -->
       <update_rate>30</update_rate> <!-- 30 fps uprade rate -->
       <visualize>true</visualize>
       <topic>back_left_cam</topic> <!-- ign topic -->
       <camera>     <!-- Camera Properties -->
          <horizontal_fov>2.0944</horizontal_fov>
          <image>
            <width>640</width>
            <height>480</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>50</far>
            </clip>
       </camera>
      </sensor>
    </link>

    <joint name="base_joint" type="fixed">
      <parent>base_footprint</parent>
      <child>base_link</child>
      <pose>0 0 0.09 0 0 0</pose> <!-- Fixed joint at 0.09m z-axis attache to Base Footprint -->
    </joint>

    <!-- IMU Link -->
    <link name="imu_link">
      <sensor name='imu_sensor' type='imu'>
        <always_on>1</always_on> <!-- For continuous operation of sensor -->
        <update_rate>200</update_rate>  <!-- 200 Hz update rate -->
        <pose>0 0 0.06 0 -0 0</pose>  <!-- x=0, y=0 , z=0.06m, r=0, p=0, y=0-->
        <visualize>true</visualize>  <!-- Enables visualization in gazebo -->
        <topic>/imu_scan</topic>    <!-- ign topic for publishing the data -->
        <frameName>imu_link</frameName> 
        <imu>
          <angular_velocity>   <!-- Parameters for measuring angular velocity -->
            <x>
              <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>2e-4</stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>2e-4</stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>2e-4</stddev>
              </noise>
            </z>
          </angular_velocity>
          <linear_acceleration>  <!-- Parameters for measuring linear acceleration -->
            <x>
              <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>1.7e-2</stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>1.7e-2</stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>1.7e-2</stddev>
              </noise>
            </z>
          </linear_acceleration>
        </imu>
      </sensor>
    </link>

    <joint name="imu_joint" type="fixed"> <!-- Fixed joint attached to base link -->
      <parent>base_link</parent>
      <child>imu_link</child>
      <pose>0 0 0.06 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
      </axis>
    </joint>
    
    <!-- Front Lidar -->
    <link name="base_scan_front">
      <pose relative_to="base_footprint" >1.0 0 0.04 0 0 3.14</pose> <!-- x=1.0m, y=0, z=0.04m, r=0,p=0,y=3.14 rad -->
      <inertial>
        <inertia>
          <ixx>0.00098</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.00098</iyy>
          <iyz>0</iyz>
          <izz>0.000146</izz>
        </inertia>
        <mass>1.17</mass> <!-- mass=1.17 kg -->
      </inertial>
      <collision name='lidar_sensor_front_collision'>
        <geometry>
          <cylinder>
            <length>0.05</length>
            <radius>0.05</radius>
          </cylinder>
        </geometry>
      </collision>
      <visual name='lidar_sensor_front_visual'>
        <material>
         <ambient>1 1 0 1</ambient>
         <diffuse>1 1 0 1</diffuse>
        </material>
        <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- scaled to 0.001 for units in meters -->
            <uri>../meshes/lidar_front.stl</uri>
          </mesh>
        </geometry>
      </visual>
      <sensor name='lidar_front' type='gpu_lidar'> <!-- sensor properties -->
         <pose> 0.01 0 0.22 0 0 3.14 </pose>  <!-- x=0.01m y=0m, z=0.22m, r=0, p=0, y=3.14 rad -->
         <topic>lidar_front</topic>  <!-- ign topic -->
         <frame_name>base_scan_front</frame_name>  <!-- ign frame -->
         <update_rate>5</update_rate>  <!-- 5 Hz suitable for low speed robots -->
         <always_on>1</always_on> <!-- Sensor active all the time -->
         <visualize>true</visualize> <!-- visualization in gazebo -->
         <ray>
              <scan>
                  <horizontal>
                       <samples>720</samples>  <!-- Number of horizontal laser rays emitted -->
                       <resolution>1</resolution>  <!-- Angular resolution multiplier -->
                       <min_angle>-1.396263</min_angle> <!-- minimum angle in horizontal direction-->
                       <max_angle>1.396263</max_angle>  <!-- maximum angle in horizontal direction-->
                  </horizontal>
                  <vertical>
                       <samples>1</samples>  <!-- Number of horizontal laser rays emitted -->
                       <resolution>0.01</resolution> <!-- vertical resolution -->
                       <min_angle>0</min_angle> <!-- zero spreed in vertical direction(2D LIdar)-->
                       <max_angle>0</max_angle> <!-- zero spreed in vertical direction(2D LIdar)-->
                  </vertical>
               </scan>
               <range>
                   <min>0.08</min>  <!-- minimum range (meters) -->
                   <max>10.0</max>  <!-- maximum range (meters) -->
                   <resolution>0.01</resolution>  <!-- lidar rays resolution -->
               </range>
         </ray>
      </sensor>
    </link>
    <joint name="lidar_front_joint" type="fixed">
      <pose>1.1 0 0 0 0 0</pose> <!-- x=1.1m y=0m, z=0, r=0, p=0, y=0 -->
      <parent>base_footprint</parent>
      <child>base_scan_front</child>
      <axis>
        <xyz>0 0 1</xyz>
      </axis>
    </joint>

    <!-- Back Lidar -->
    <link name="base_scan_back">
     <pose relative_to="base_footprint" >-0.9 0 0.04 0 0 0</pose> <!-- x=-0.9m, y=0, z=0.04m, r=0,p=0,y=0 -->
     <inertial>
        <inertia>
          <ixx>0.00098</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.00098</iyy>
          <iyz>0</iyz>
          <izz>0.000146</izz>
        </inertia>
        <mass>1.17</mass>
      </inertial>

     <collision name='lidar_sensorback_collision'>
        <geometry>
          <cylinder>
            <length>0.05</length>
            <radius>0.05</radius>
          </cylinder>
        </geometry>
      </collision>


      <visual name='lidar_sensor_back_visual'>

        <material>
          <ambient>1 1 0 1</ambient>
          <diffuse>1 1 0 1</diffuse>
        </material>
        <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- scaled to 0.001 for units in meters -->
            <uri>../meshes/lidar_front.stl</uri>
          </mesh>
        </geometry>
      </visual>

      <sensor name='lidar_back' type='gpu_lidar'> <!-- sensor properties -->
         <pose>-0.05 0.0 0.22 0 0 3.14</pose>  <!-- x=-0.05m y=0m, z=0.22m, r=0, p=0, y=3.14 rad -->
         <topic>lidar_back</topic>  <!-- ign topic -->
         <frame_name>base_scan_back</frame_name>  <!-- ign frame -->
         <update_rate>5</update_rate>  <!-- 5 Hz suitable for low speed robots -->
         <always_on>1</always_on> <!-- Sensor active all the time -->
         <visualize>true</visualize> <!-- visualization in gazebo -->
         <ray>
              <scan>
                  <horizontal>
                       <samples>720</samples>  <!-- Number of horizontal laser rays emitted -->
                       <resolution>1</resolution>  <!-- Angular resolution multiplier -->
                       <min_angle>-1.396263</min_angle> <!-- minimum angle in horizontal direction-->
                       <max_angle>1.396263</max_angle>  <!-- maximum angle in horizontal direction-->
                  </horizontal>
                  <vertical>
                       <samples>1</samples>  <!-- Number of horizontal laser rays emitted -->
                       <resolution>0.01</resolution> <!-- vertical resolution -->
                       <min_angle>0</min_angle> <!-- zero spreed in vertical direction(2D LIdar)-->
                       <max_angle>0</max_angle> <!-- zero spreed in vertical direction(2D LIdar)-->
                  </vertical>
               </scan>
               <range>
                   <min>0.08</min>  <!-- minimum range (meters) -->
                   <max>10.0</max>  <!-- maximum range (meters) -->
                   <resolution>0.01</resolution>  <!-- lidar rays resolution -->
               </range>
         </ray>
      </sensor>

    </link>

    <joint name="lidar_back_joint" type="fixed"> 
      <pose relative_to='base_scan_back'/>
      <parent>base_footprint</parent>
      <child>base_scan_back</child>
      <axis>
        <xyz>0 0 1</xyz>
      </axis>
    </joint>

    <!-- Front Right Wheel -->
    <link name='front_right_wheel'>
      <inertial>   <!-- Inertial properties-->
        <pose>0.580 -0.200 -0.02 -1.5707 0 0</pose>
        <mass>0.765</mass> <!-- Mass of the wheel in kg -->
        <inertia> <!-- Inertia tensor components in kg·m² -->
            <ixx>0.0019</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.0011</iyy>
            <iyz>0</iyz>
            <izz>0.0011</izz>
        </inertia>
      </inertial>

      <collision name='front_right_wheel_collision'>  <!-- Collision element  -->
        <pose>0.580 -0.200 -0.02 -1.5707 0 0</pose>
        <geometry> 
          <cylinder>
            <radius>0.075</radius> <!-- Radius of the wheel in meters -->
            <length>0.05</length> <!-- Width (thickness) of the wheel -->
          </cylinder>
        </geometry>
        <surface>
           <friction>
             <ode>
              <mu>0.90</mu> <!-- Friction coefficient in longitudinal direction -->
              <mu2>0.25</mu2> <!-- Friction coefficient in lateral direction -->
              <fdir1>0 1 0</fdir1>
             </ode>
            </friction>
        </surface>
        
      </collision>

      <visual name='front_right_wheel_visual'> <!-- Visual element  -->
       <pose>0.580 -0.200 -0.02 0 0 0</pose>
       <material>
          <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
          <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
       </material>
       <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
            <uri>../meshes/wheel_front_right.stl</uri> <!-- Mesh file for visual appearance -->
          </mesh>
       </geometry>
      </visual>

    </link>

    <joint name="front_right_wheel_joint" type="revolute">
      <pose>0.580 -0.200 -0.02 0 -1.5707 0</pose>
      <parent>base_link</parent>
      <child>front_right_wheel</child>
      <dynamics>
        <damping>0</damping> <!-- Resistance to motion -->
      </dynamics>
      <effort>10000.0</effort> <!-- Max torque that can be applied -->
      <velocity>100.0</velocity> <!-- Max rotational velocity -->
      <axis>
        <xyz> 0 1 0</xyz> <!-- Rotation axis of the wheel (around y-axis) -->
        <limit> <!-- Very large limits simulate continuous rotation -->
          <lower>-1.7e+308</lower>
          <upper>1.7e+308</upper>
        </limit>
      </axis>
    </joint>

    <!-- Front Left Wheel -->
    <link name='front_left_wheel'>

      <inertial>  <!-- Inertial properties-->
        <pose>0.580 0.200 -0.02 -1.5707 0 0</pose> 
        <mass>0.765</mass> <!-- Mass of the wheel in kg -->
        <inertia> <!-- Inertia tensor components in kg·m² -->
            <ixx>0.0019</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.0011</iyy>
            <iyz>0</iyz>
            
            <izz>0.0011</izz>
        </inertia>
      </inertial>

      <collision name='front_left_wheel_collision'> <!-- Collision element  -->
        <pose>0.580 0.200 -0.02 -1.5707 0 0</pose> 
        <geometry>
          <cylinder>
            <radius>0.075</radius> <!-- Radius of the wheel in meters -->
            <length>0.05</length>  <!-- Width (thickness) of the wheel -->
          </cylinder>
        </geometry>
        <surface>
           <friction>
             <ode>
              <mu>0.90</mu> <!-- Friction coefficient in longitudinal direction -->
              <mu2>0.25</mu2> <!-- Friction coefficient in lateral direction -->
              <fdir1>0 1 0</fdir1>
             </ode>
            </friction>
        </surface>
        
      </collision>
      <visual name='front_left_wheel_visual'> <!-- Visual element  -->
        <pose>0.580 0.200 -0.02 0 0 0</pose> 
        <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
        </material>
        <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
            <uri>../meshes/wheel_front_left.stl</uri> <!-- Mesh file for visual appearance -->
          </mesh>
        </geometry>
      </visual>

    </link>

    <joint name="front_left_wheel_joint" type="revolute">
      <pose>0.580 0.200 -0.02 0 -1.5707 0</pose>
      <parent>base_link</parent>
      <child>front_left_wheel</child>
      <dynamics>
        <damping>0</damping> <!-- Resistance to motion -->
      </dynamics>
      <effort>10000.0</effort> <!-- Max torque that can be applied -->
      <velocity>100.0</velocity> <!-- Max rotational velocity -->
      <axis>
        <xyz> 0 1 0</xyz> <!-- Rotation axis of the wheel (around y-axis) -->
        <limit>  <!-- Very large limits simulate continuous rotation -->
          <lower>-1.7e+308</lower>
          <upper>1.7e+308</upper>
        </limit>
      </axis>
    </joint>

    <!-- Back Right Wheel -->
    <link name='back_right_wheel'>
     <inertial> <!-- Inertial properties-->
        <pose>-0.580 -0.200 -0.02 -1.5707 0 0</pose>
        <mass>0.765</mass> <!-- Mass of the wheel in kg -->
        <inertia> <!-- Inertia tensor components in kg·m² -->
            <ixx>0.0019</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.0011</iyy>
            <iyz>0</iyz>
            <izz>0.0011</izz>
        </inertia>
      </inertial>

      <collision name='back_right_wheel_collision'> <!-- Collision element  -->
        <pose>-0.580 -0.200 -0.02 -1.5707 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.075</radius> <!-- Radius of the wheel in meters -->
            <length>0.05</length> <!-- Width (thickness) of the wheel -->
          </cylinder>
        </geometry>
        <surface>
           <friction>
             <ode>
              <mu>0.90</mu> <!-- Friction coefficient in longitudinal direction -->
              <mu2>0.25</mu2> <!-- Friction coefficient in lateral direction -->
              <fdir1>0 1 0</fdir1>
             </ode>
            </friction>
        </surface>
        
      </collision>

      <visual name='back_right_wheel_visual'> <!-- Visual element  -->
        <pose>-0.580 -0.200 -0.02 0 0 0</pose>
        <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
        </material>
        <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
            <uri>../meshes/wheel_front_right.stl</uri> <!-- Mesh file for visual appearance -->
          </mesh>
        </geometry>
      </visual>

    </link>

    <joint name="back_right_wheel_joint" type="revolute">
      <pose>-0.580 -0.200 -0.02 0 -1.5707 0</pose>
      <parent>base_link</parent>
      <child>back_right_wheel</child>
      <dynamics>
        <damping>0</damping> <!-- Resistance to motion -->
      </dynamics>
      <effort>10000.0</effort> <!-- Max torque that can be applied -->
      <velocity>100.0</velocity> <!-- Max rotational velocity -->
      <axis>
        <xyz> 0 1 0</xyz> <!-- Rotation axis of the wheel (around y-axis) -->
        <limit>  <!-- Very large limits simulate continuous rotation -->
          <lower>-1.7e+308</lower>
          <upper>1.7e+308</upper>
        </limit>
      </axis>
    </joint>

    <!-- Back Left Wheel -->
    <link name='back_left_wheel'>
      <inertial> <!-- Inertial properties-->
        <pose>-0.580 0.200 -0.02 -1.5707 0 0</pose>
        <mass>0.765</mass> <!-- Mass of the wheel in kg -->
        <inertia> <!-- Inertia tensor components in kg·m² -->
            <ixx>0.0019</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.0011</iyy>
            <iyz>0</iyz>
            
            <izz>0.0011</izz>
        </inertia>
      </inertial>

      <collision name='back_left_wheel_collision'> <!-- Collision element  -->
        <pose>-0.580 0.200 -0.02 -1.5707 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.075</radius> <!-- Radius of the wheel in meters -->
            <length>0.05</length> <!-- Width (thickness) of the wheel -->
          </cylinder>
        </geometry>
        <surface>
           <friction>
             <ode>
              <mu>0.90</mu> <!-- Friction coefficient in longitudinal direction -->
              <mu2>0.25</mu2> <!-- Friction coefficient in lateral direction -->
              <fdir1>0 1 0</fdir1>
             </ode>
            </friction>
        </surface>
        
      </collision>

      <visual name='back_left_wheel_visual'> <!-- Visual element  -->
        <pose>-0.580 0.200 -0.02 0 0 0</pose>
        <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
        </material>
        <geometry>
          <mesh>
            <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
            <uri>../meshes/wheel_front_right.stl</uri> <!-- Mesh file for visual appearance -->
          </mesh>
        </geometry>
      </visual>
    </link>    
  
    <joint name="back_left_wheel_joint" type="revolute">
      <pose>-0.580 0.200 -0.02 0 -1.5707 0</pose>
      <parent>base_link</parent>
      <child>back_left_wheel</child>
      <dynamics>
        <damping>0</damping> <!-- Resistance to motion -->
      </dynamics>
      <effort>10000.0</effort> <!-- Max torque that can be applied -->
      <velocity>100.0</velocity> <!-- Max rotational velocity -->
      <axis>
        <xyz> 0 1 0</xyz> <!-- Rotation axis of the wheel (around y-axis) -->
        <limit>  <!-- Very large limits simulate continuous rotation -->
          <lower>-1.7e+308</lower>
          <upper>1.7e+308</upper>
        </limit>
      </axis>
    </joint>

   <!-- Front Right Castor Wheel -->
   <link name='castor_front_right'>
     <inertial> <!-- Inertial properties-->
        <pose>0.920 -0.170 -0.05 0 0 0</pose>
        <mass>0.103</mass> <!-- Mass of the wheel in kg -->
        <inertia> <!-- Inertia tensor components in kg·m² -->
            <ixx>0.016</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.016</iyy>
            <iyz>0</iyz>
            <izz>0.016</izz>
        </inertia>
     </inertial>
     <visual name='visual_castor_front_right'> <!-- Visual element  -->
      <pose>0.920 -0.170 -0.05 0 0 0</pose>
      <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
      </material>
      <geometry>
        <mesh>
         <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
         <uri>../meshes/castor_front_right.stl</uri> <!-- Mesh file for visual appearance -->
        </mesh>
      </geometry>
     </visual>
     <collision name='collision_castor_front_right'> <!-- Collision element  -->
        <pose>0.920 -0.170 -0.05 0 0 0</pose>
        <geometry>
          <sphere>
             <radius>0.025</radius> <!-- Radius in meters -->
          </sphere>
        </geometry>
     </collision>
   </link>
   <joint name='caster__front_right_joint' type='ball'>
      <pose>0.920 -0.170 -0.05 0 0 0</pose>
      <parent>base_link</parent>
      <child>castor_front_right</child>
   </joint>
   <!-- Front Left Castor Wheel -->
    <link name='castor_front_left'>
     <inertial> <!-- Inertial properties-->
        <pose>0.920 0.170 -0.05 0 0 0</pose>
        <mass>0.103</mass> <!-- Mass of the wheel in kg -->
        <inertia> <!-- Inertia tensor components in kg·m² -->
            <ixx>0.016</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.016</iyy>
            <iyz>0</iyz>
            <izz>0.016</izz>
        </inertia>
     </inertial>
     <visual name='visual_castor_front_left'> <!-- Visual element  -->
      <pose>0.920 0.170 -0.05 0 0 0</pose>
      <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse>  <!-- Diffuse color: green -->
      </material>
      <geometry>
        <mesh>
         <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
         <uri>../meshes/castor_front_right.stl</uri> <!-- Mesh file for visual appearance -->
        </mesh>
      </geometry>
     </visual>
     <collision name='collision_castor_front_left'> <!-- Collision element  -->
        <pose>0.920 0.170 -0.05 0 0 0</pose>
        <geometry>
          <sphere>
             <radius>0.025</radius> <!-- Radius in meters -->
          </sphere>
        </geometry>
     </collision>
    </link>
    <joint name='caster_front_left_joint' type='ball'>
      <pose>0.920 0.170 -0.05 0 0 0</pose>
      <parent>base_link</parent>
      <child>castor_front_left</child>
    </joint>

    <!-- Back Right Castor Wheel -->
   <link name='castor_back_right'>
     <inertial>  <!-- Inertial properties-->
        <pose>-0.790 -0.170 -0.05 0 0 0</pose>
        <mass>0.103</mass> <!-- Mass of the wheel in kg -->
        <inertia>  <!-- Inertia tensor components in kg·m² -->
            <ixx>0.016</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.016</iyy>
            <iyz>0</iyz>
            <izz>0.016</izz>
        </inertia>
     </inertial>
     <visual name='visual_castor_back_right'> <!-- Visual element  -->
      <pose>-0.790 -0.170 -0.05 0 0 0</pose>
      <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
      </material>
      <geometry>
        <mesh>
         <scale>0.001 0.001 0.001</scale> <!-- Scale down from mm to meters -->
         <uri>../meshes/castor_front_right.stl</uri> <!-- Mesh file for visual appearance -->
        </mesh>
      </geometry>
     </visual>
     <collision name='collision_castor_back_right'> <!-- Collision element  -->
        <pose>-0.790 -0.170 -0.05 0 0 0</pose>
        <geometry>
          <sphere>
             <radius>0.025</radius> <!-- Radius in meters -->
          </sphere>
        </geometry>
     </collision>
   </link>
   <joint name='caster_back_right_joint' type='ball'>
      <pose>-0.790 -0.170 -0.05 0 0 0</pose>
      <parent>base_link</parent>
      <child>castor_back_right</child>
   </joint>
   <!-- Back Left Castor Wheel -->
    <link name='castor_back_left'>
     <inertial> <!-- Inertial properties-->
        <pose>-0.790 0.170 -0.05 0 0 0</pose>
        <mass>0.103</mass> <!-- Mass of the wheel in kg -->
        <inertia>  <!-- Inertia tensor components in kg·m² -->
            <ixx>0.016</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.016</iyy>
            <iyz>0</iyz>
            <izz>0.016</izz>
        </inertia>
     </inertial>
     <visual name='visual_castor_back_left'> <!-- Visual element  -->
      <pose>-0.790 0.170 -0.05 0 0 0</pose>
      <material>
         <ambient>0 1 0 1</ambient> <!-- Ambient color: green -->
         <diffuse>0 1 0 1</diffuse> <!-- Diffuse color: green -->
      </material>
      <geometry>
        <mesh>
         <scale>0.001 0.001 0.001</scale>  <!-- Scale down from mm to meters -->
         <uri>../meshes/castor_front_right.stl</uri>  <!-- Mesh file for visual appearance -->
        </mesh>
      </geometry>
     </visual>
     <collision name='collision_castor_back_left'> <!-- Collision element  -->
        <pose>-0.790 0.170 -0.05 0 0 0</pose>
        <geometry>
          <sphere>
             <radius>0.025</radius>  <!-- Radius in meters -->
          </sphere>
        </geometry>
     </collision>
    </link>
    <joint name='caster_back_left_joint' type='ball'>
      <pose>-0.790 0.170 -0.05 0 0 0</pose>
      <parent>base_link</parent>
      <child>castor_back_left</child>
    </joint>


    <!-- Gazebo Plugins -->
    <plugin name="ignition::gazebo::systems::DiffDrive" 
        filename="libignition-gazebo-diff-drive-system.so">
      <left_joint>front_left_wheel_joint</left_joint>
      <left_joint>back_left_wheel_joint</left_joint>
      <right_joint>front_right_wheel_joint</right_joint>
      <right_joint>back_right_wheel_joint</right_joint>
      <wheel_separation>0.400</wheel_separation> <!-- Distance between left and right wheels (meters) -->
      <wheel_radius>0.075</wheel_radius> <!-- Radius of the wheels (meters) -->
      <topic>/cmd_vel</topic> <!-- Topic to receive velocity commands  -->
      <odom_topic>/odom</odom_topic> <!-- Topic to publish odometry  -->
      <odometry_frame>odom</odometry_frame>
      <publish_tf>true</publish_tf>
      <broadcast_TF>1</broadcast_TF>
      <publish_odom>true</publish_odom>
      <base_frame>base_link</base_frame> <!-- Base frame used in the odometry message -->
      <update_rate>50</update_rate>
    </plugin>
    
    <plugin name="ignition::gazebo::systems::JointStatePublisher" filename="libignition-gazebo-joint-state-publisher-system.so">
     <update_rate>30</update_rate> <!-- Update rate in Hz for publishing joint states -->
     <joint_name>front_left_wheel_joint</joint_name>
     <joint_name>front_right_wheel_joint</joint_name>
     <joint_name>back_left_wheel_joint</joint_name>
     <joint_name>back_right_wheel_joint</joint_name>
     <topic>/joint_states</topic> <!-- Topic for publishing joint states (sensor_msgs/JointState) -->
    </plugin>

    <plugin name="ignition::gazebo::systems::DetachableJoint" filename="libignition-gazebo-detachable-joint-system.so" >
     
      <parent_link>base_link</parent_link> 
      <child_model>trolley</child_model>
      <child_link>base</child_link> 
      <output_topic>/detachable_joint_state</output_topic>
      <attach_topic>/attach</attach_topic>
      <detach_topic>/detach</detach_topic>
      
    </plugin>

 </model>
</sdf>
